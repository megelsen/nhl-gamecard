<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NHL Gamecard</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined&display=block" />
     <!-- Static CSS -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/close_button.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/content.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/game_display.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/headings.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/links.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/loading_spinner.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/tables.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/team_summary.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/teams_table.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/top_row_element.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/top_scorer_modal.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/top_scorer.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/upcoming_game.css') }}">

    <!-- Load Dynamic CSS -->
    <link rel="stylesheet" type="text/css" href="/body.css">
    <link rel="stylesheet" type="text/css" href="/cards.css">
    <link rel="stylesheet" type="text/css" href="/container.css">
    <link rel="stylesheet" type="text/css" href="/media_scaling.css">
    <link rel="stylesheet" type="text/css" href="/previous_games.css">
    <link rel="stylesheet" type="text/css" href="/team_dropdown.css">
    <link rel="stylesheet" type="text/css" href="/title_card.css">

</head>
<body>
    <div id="loading-wheel">
        <div class="spinner"></div>
    </div>
    <div class="content"> 
        <div class="container_title widthTargetElement ">
            <div class="title_card title_card_display">
                <img src="{{team_info['query_team_logo_big']}}">
                <h1>
                    {{team_info['team_name']}}
                </h1>
                <form class="dropdown_wrapper" id="team_form" method="POST">
                    <select class="team-dropdown" id="team_abbr" name="team_abbr" onchange="handleTeamChange()">
                        {{dropdown_html | safe }}
                    </select>        
                </form>
            </div>
        </div>
        <div class="container" id="widthSourceElement">
            <div class="top_row_element card_display" id="statsCard">
                <h2 class="top_card_header">
                    Stats
                </h2>                    
                <span class="material-symbols-outlined more-stats" id="moreStats">
                    more_horiz
                </span>
                <p class="top-scorer-label">Top scorer:</p>
                <div class ="top-scorer-info">
                    <p style="  margin-block-end: 0">{{top_scorer['name']}}</p>            
                    <p style="  margin-block: 0">({{ top_scorer['goals']}}G-{{ top_scorer['assists']}}A-{{ top_scorer['points']}}P)</p>
                </div>
                <div class="headshot-img">
                    <img src={{ top_scorer['headshot_url'] }} style="max-width: 150px;">
                </div>
                <div class="team-summary">
                    {{ html_team_summary | safe }}
                </div>
            </div>
            <div id="statsPopUp" class="stats-popup">                    
                <!-- Modal Content -->
                <div class="stats-popup-content card_display">
                    <!-- Closing Button -->
                    <span class="close" id="closeBtn">&times;</span>
                    <!-- Navigation Buttons -->
                    <div class="modal-nav">
                        <button id="prevButton" class="nav-button">
                            <span class="material-symbols-outlined">
                                arrow_back_ios
                            </span>
                        </button>
                        <h2 id="modal-title">Points</h2>
                        <button id="nextButton" class="nav-button">
                            <span class="material-symbols-outlined">
                                arrow_forward_ios
                            </span>
                        </button> 
                    </div>
                    <div id="modalContent">
                        <div id="points-leaders-content">                                
                            {{html_pts_leader_table | safe }} 
                        </div> 
                        <div id="goal-leaders-content" style="display: none;">
                            {{html_goals_leader_table | safe }}
                        </div>
                        <div id="assist-leaders-content" style="display: none;">
                            {{html_assists_leader_table | safe }}
                        </div>    
                    </div>                      
                </div>
            </div>
            <div class="top_row_element card_display">
                <h2  class="top_card_header">Next game</h2>
                <div class="upcoming_game">
                     <span id="event-time" data-utc-time={{utc_starttime}}>
                        {{html_next_game | safe }}
                    </span>
                </div>
                <div class="team-summary">
                    {{html_next_opponent_summary | safe  }}
                </div>                
            </div>
            <div class="previous_game card_display">
                <h2>Last games</h2>
                <span class="game_display previous_game">{{html_last_games[0] | safe }}</span>
                <span class="game_display previous_game">{{html_last_games[1] | safe }}</span>
                <span class="game_display previous_game">{{html_last_games[2] | safe }}</span>
            </div>
        </div>

        <div class="container widthTargetElement">
            <div class="table card_display">
                <h2>
                Standings
                </h2>
                <p>{{html_standings_table | safe }}</p>
            </div>
            <div class="card_display">
                <h2> Record vs {{team_info['team_conference']}} </h2>
                {{ record_table_1 | safe }}
            </div>
            <div class="card_display">
                <h2>  Record vs {{team_info['opposite_conference']}} </h2>
                {{ record_table_2 | safe }}
            </div>
        </div>  
    </div>     

    <!-- ðŸ”¹ Static JavaScript -->
    <script src="{{ url_for('static', filename='js/eventListeners.js') }}"></script>
    <script src="{{ url_for('static', filename='js/formatEventTime.js') }}"></script>
    <script src="{{ url_for('static', filename='js/link_team_logos.js') }}"></script>
    <script src="{{ url_for('static', filename='js/synchronizeWidths.js') }}"></script>
    <script src="{{ url_for('static', filename='js/team_dropdown.js') }}"></script>
    <script src="{{ url_for('static', filename='js/topscorers_modal.js') }}"></script>  
    <!-- ðŸ”¹ Dynamic JavaScript -->
    <script>
        var max_width_smallest_screen = {{ max_width_smallest_screen }};
    </script>
    <script src="{{ url_for('static', filename='js/applyScaling.js') }}"></script>
</body>
</html>